<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SLEPTOPIA ‚Äî Menu & Concierge</title>
  <style>
    :root{
      --bg:#07090c;
      --panel:#0b0f15;
      --card:#0f1622;
      --card2:#0c111a;
      --text:#e9eef6;
      --muted:#9aa6b2;
      --line:#1a2330;
      --accent:#33c2ff;
      --accent2:#4b7dff;
      --ok:#52f08c;
      --warn:#ffb24a;
      --shadow: 0 18px 44px rgba(0,0,0,.62);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 55% -10%, rgba(51,194,255,.16), transparent 55%),
        radial-gradient(900px 650px at 10% 110%, rgba(75,125,255,.14), transparent 60%),
        linear-gradient(180deg, #06080b 0%, #0b0d10 40%, #06080b 100%);
      overflow-x:hidden;
    }
    .app{
      max-width: 460px;
      margin: 0 auto;
      min-height: 100%;
      padding-bottom: 94px;
    }

    /* Top bar */
    .topbar{
      position: sticky; top:0; z-index:20;
      backdrop-filter: blur(10px);
      background: rgba(7,9,12,.68);
      border-bottom:1px solid rgba(26,35,48,.55);
    }
    .topbar-inner{
      padding: 14px 14px 12px;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
    }
    .brand{min-width:0}
    .title{
      font-weight: 900;
      font-size: 16px;
      letter-spacing: .2px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .subtitle{
      margin-top:3px;
      font-size:12px;
      color:var(--muted);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(51,194,255,.35);
      color:var(--accent);
      background: rgba(51,194,255,.08);
      white-space:nowrap;
    }

    /* Content */
    .content{ padding: 14px; }
    .hero{
      border-radius: 22px;
      border:1px solid rgba(26,35,48,.7);
      background:
        linear-gradient(135deg, rgba(51,194,255,.14), rgba(75,125,255,.10)),
        radial-gradient(900px 400px at 60% -20%, rgba(255,255,255,.09), transparent 60%),
        rgba(15,22,34,.6);
      box-shadow: var(--shadow);
      overflow:hidden;
      padding: 14px;
    }
    .hero .row{ display:flex; gap:12px; align-items:center; }
    .hero .big{
      font-size: 18px;
      font-weight: 950;
      letter-spacing:.2px;
    }
    .hero .desc{
      color:var(--muted);
      font-size:12px;
      margin-top:6px;
      line-height:1.35;
    }
    .badge{
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(26,35,48,.9);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      white-space:nowrap;
    }

    .searchWrap{ margin-top:12px; }
    .search{
      display:flex; gap:10px; align-items:center;
      border-radius: 16px;
      border:1px solid rgba(26,35,48,.75);
      background: rgba(11,15,21,.65);
      padding: 10px 12px;
    }
    .search input{
      flex:1;
      border:0;
      outline:0;
      background:transparent;
      color: var(--text);
      font-size: 13px;
    }
    .search .hint{ color:var(--muted); font-size:12px; }

    /* Segmented tabs */
    .seg{
      margin-top: 12px;
      display:flex;
      padding: 6px;
      border-radius: 18px;
      border:1px solid rgba(26,35,48,.75);
      background: rgba(11,15,21,.55);
      gap:6px;
    }
    .seg button{
      flex:1;
      border:0;
      cursor:pointer;
      padding: 10px 10px;
      border-radius: 14px;
      background: transparent;
      color: var(--muted);
      font-weight: 800;
      font-size: 12px;
      letter-spacing:.2px;
    }
    .seg button.active{
      background: rgba(51,194,255,.10);
      color: var(--accent);
      border: 1px solid rgba(51,194,255,.30);
    }

    /* Cards */
    .grid{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .card{
      border-radius: 22px;
      border:1px solid rgba(26,35,48,.70);
      background:
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardInner{ padding: 12px; }
    .img{
      height: 148px;
      border-radius: 18px;
      border:1px solid rgba(26,35,48,.70);
      overflow:hidden;
      background: rgba(255,255,255,.02);
      position:relative;
    }
    .img img{ width:100%; height:100%; object-fit:cover; display:block; }
    .img .tag{
      position:absolute;
      top:10px; left:10px;
      font-size:11px;
      padding: 6px 10px;
      border-radius:999px;
      background: rgba(7,9,12,.70);
      border:1px solid rgba(26,35,48,.80);
      color: rgba(233,238,246,.92);
      backdrop-filter: blur(10px);
    }
    .title2{
      margin: 12px 2px 0;
      font-size: 15px;
      font-weight: 950;
      letter-spacing:.2px;
    }
    .sub2{
      margin: 6px 2px 0;
      color: var(--muted);
      font-size: 12px;
      line-height:1.35;
    }
    .priceRow{
      margin-top: 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .price{
      font-weight: 950;
      font-size: 16px;
    }
    .per{
      color: var(--muted);
      font-size: 12px;
      font-weight: 700;
      margin-left: 6px;
    }
    .ctaRow{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 11px 12px;
      border-radius: 16px;
      border:1px solid rgba(26,35,48,.90);
      background: rgba(15,22,34,.60);
      color: var(--text);
      text-decoration:none;
      cursor:pointer;
      user-select:none;
      font-weight: 900;
      font-size: 12px;
      transition: transform .08s ease, border-color .18s ease, background .18s ease;
    }
    .btn:active{ transform: scale(.98); }
    .btn.primary{
      border-color: rgba(51,194,255,.55);
      background: rgba(51,194,255,.10);
      color: var(--accent);
    }
    .btn.ghost{
      background: rgba(255,255,255,.02);
      color: var(--muted);
    }
    .btn.full{ width: 100%; }

    .icon{ width:18px; height:18px; display:inline-block; }
    .muted{ color:var(--muted); }

    /* Bottom nav */
    .nav{
      position: fixed;
      left: 0; right: 0; bottom: 0;
      display:flex; justify-content:center;
      padding: 10px 10px 16px;
      z-index: 30;
      pointer-events:none;
    }
    .navInner{
      pointer-events:auto;
      width:min(460px, calc(100vw - 20px));
      background: rgba(7,9,12,.82);
      border:1px solid rgba(26,35,48,.70);
      border-radius: 22px;
      box-shadow: 0 24px 60px rgba(0,0,0,.70);
      backdrop-filter: blur(10px);
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      padding: 8px;
      gap:6px;
    }
    .tab{
      text-decoration:none;
      color: var(--muted);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 12px 10px;
      border-radius: 18px;
      border:1px solid transparent;
      font-weight: 950;
      font-size: 12px;
      user-select:none;
      transition: background .18s ease, border-color .18s ease, color .18s ease;
    }
    .tab svg{ opacity:.92; }
    .tab.active{
      color: var(--accent);
      border-color: rgba(51,194,255,.30);
      background: rgba(51,194,255,.08);
    }

    /* Page */
    .page{ display:none; }
    .page.active{ display:block; }

    /* Mini cart bottom sheet */
    .sheetBg{
      position:fixed; inset:0;
      background: rgba(0,0,0,.62);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 80;
    }
    .sheetBg.show{ display:flex; }
    .sheet{
      width:min(460px, 100vw);
      border-radius: 24px 24px 0 0;
      border:1px solid rgba(26,35,48,.85);
      background: rgba(7,9,12,.94);
      backdrop-filter: blur(12px);
      box-shadow: 0 26px 70px rgba(0,0,0,.78);
      padding: 14px 14px 16px;
    }
    .sheetTop{
      display:flex; align-items:center; justify-content:space-between;
      padding: 4px 2px 10px;
    }
    .sheetTop .st{ font-weight: 1000; letter-spacing:.2px; }
    .x{ border:0; background:transparent; color:var(--muted); font-size:18px; cursor:pointer; }
    .kv{
      display:flex; justify-content:space-between; gap:12px;
      padding: 10px 0;
      border-top:1px solid rgba(26,35,48,.60);
      font-size: 13px;
    }
    .kv:first-of-type{ border-top:0; }
    .kv .k{ color:var(--muted); }
    .kv .v{ font-weight: 950; text-align:right; }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 108px;
      transform: translateX(-50%);
      background: rgba(7,9,12,.92);
      border:1px solid rgba(26,35,48,.85);
      color: rgba(233,238,246,.92);
      padding: 10px 12px;
      border-radius: 16px;
      box-shadow: 0 18px 46px rgba(0,0,0,.65);
      z-index: 90;
      font-size: 12px;
      max-width: min(440px, calc(100vw - 30px));
      text-align:center;
      display:none;
    }
    .toast.show{ display:block; }

    .smallNote{
      margin-top:10px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
      padding: 0 2px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="title">SLEPTOPIA ‚Äî Menu</div>
          <div class="subtitle">Order makanan & concierge minimarket</div>
        </div>
        <div class="chip">24/7</div>
      </div>
    </div>

    <div class="content">
      <!-- HOME / MENU -->
      <section class="page active" id="p-menu">
        <div class="hero">
          <div class="row">
            <div style="flex:1; min-width:0;">
              <div class="big">Mau makan apa hari ini?</div>
              <div class="desc">Pilih menu di bawah. Tinggal klik <b>Order via WhatsApp</b> ‚Äî cepat, rapi, ga ribet.</div>
            </div>
            <div class="badge">SLEPTOPIA</div>
          </div>

          <div class="searchWrap">
            <div class="search">
              <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="1.6"/>
                <path d="M16.5 16.5 21 21" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
              <input id="q" placeholder="Cari: lemper, pempek, rokok, air..." oninput="filterItems()" />
              <div class="hint">Cari</div>
            </div>
          </div>

          <div class="seg" role="tablist" aria-label="Kategori">
            <button id="segFood" class="active" onclick="setCategory('food')">Makanan</button>
            <button id="segConcierge" onclick="setCategory('concierge')">Concierge</button>
          </div>
        </div>

        <div class="grid" id="cards"></div>

        <div class="smallNote">
          Tip: tulis nomor kamar + nama tamu saat order biar cepat diproses.
        </div>
      </section>

      <!-- INFO -->
      <section class="page" id="p-info">
        <div class="hero">
          <div class="row">
            <div style="flex:1; min-width:0;">
              <div class="big">Cara order</div>
              <div class="desc">1) Pilih item ‚Üí 2) Klik <b>Order</b> ‚Üí 3) Tambahkan qty & nomor kamar di WhatsApp.</div>
            </div>
            <div class="badge">Help</div>
          </div>
        </div>

        <div style="margin-top:12px" class="card">
          <div class="cardInner">
            <div class="title2">Template pesan cepat</div>
            <div class="sub2">Copy-paste ini ke WhatsApp biar ga lupa format.</div>

            <div style="margin-top:12px; border:1px solid rgba(26,35,48,.7); border-radius:18px; padding:12px; background:rgba(11,15,21,.55);">
              <div style="font-weight:900; font-size:12px; color:var(--muted); margin-bottom:8px;">TEMPLATE</div>
              <div id="tpl" style="white-space:pre-wrap; font-weight:800; line-height:1.35;">
Halo, mau order dari SLEPTOPIA:

Nama tamu:
No kamar:
Item:
Qty:
Catatan:
              </div>
              <div class="ctaRow" style="margin-top:12px; grid-template-columns:1fr;">
                <button class="btn primary full" onclick="copyTemplate()">Copy template</button>
              </div>
            </div>

            <div class="ctaRow" style="margin-top:12px;">
              <a class="btn primary" href="https://wa.me/message/AJ2VGIT6CVZVE1" target="_blank" rel="noopener">
                <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M12 21.5a9.5 9.5 0 1 0-8.1-4.5L3 21l4.1-1A9.5 9.5 0 0 0 12 21.5Z" stroke="currentColor" stroke-width="1.6"/>
                  <path d="M9.2 8.7c.2-.5.5-.5.7-.5h.6c.2 0 .4.1.5.4l.8 1.8c.1.2.1.5 0 .7l-.4.5c-.1.2-.2.4 0 .6.4.8 1.4 1.9 2.6 2.4.2.1.4.1.6-.1l.6-.7c.2-.2.5-.3.7-.2l1.8.8c.3.1.4.4.4.6 0 .7-.3 1.4-.9 1.8-.6.4-1.5.6-2.7.2-1.8-.6-3.8-2.4-4.8-4.2-.7-1.2-.6-2.2-.3-2.9Z" fill="currentColor" opacity=".9"/>
                </svg>
                Buka WhatsApp
              </a>
              <button class="btn ghost" onclick="toast('Menu ini cuma mockup ya üòÑ')">Info</button>
            </div>

          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Bottom nav -->
  <div class="nav">
    <div class="navInner">
      <a class="tab active" href="#menu" data-go="p-menu" aria-label="Menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/></svg>
        Menu
      </a>
      <a class="tab" href="#concierge" data-go="p-menu" aria-label="Concierge" onclick="setCategory('concierge'); return false;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M7 20h10M8 20V9a4 4 0 0 1 8 0v11" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/></svg>
        Concierge
      </a>
      <a class="tab" href="#info" data-go="p-info" aria-label="Info">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 17v-6M12 7h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" stroke="currentColor" stroke-width="1.6"/></svg>
        Cara order
      </a>
    </div>
  </div>

  <!-- Bottom sheet -->
  <div class="sheetBg" id="sheetBg" onclick="if(event.target.id==='sheetBg') closeSheet();">
    <div class="sheet">
      <div class="sheetTop">
        <div class="st" id="sTitle">Order</div>
        <button class="x" onclick="closeSheet()">‚úï</button>
      </div>

      <div class="kv"><div class="k">Item</div><div class="v" id="sItem">-</div></div>
      <div class="kv"><div class="k">Harga</div><div class="v" id="sPrice">-</div></div>
      <div class="kv"><div class="k">Satuan</div><div class="v" id="sUnit">-</div></div>

      <div style="display:grid; grid-template-columns: 1fr 120px; gap:10px; margin-top:12px;">
        <div style="border:1px solid rgba(26,35,48,.70); border-radius:16px; background:rgba(11,15,21,.55); padding:10px 12px;">
          <div style="color:var(--muted); font-size:11px; font-weight:800; margin-bottom:6px;">CATATAN (opsional)</div>
          <input id="sNote" placeholder="No kamar + nama tamu + qty" style="width:100%; border:0; outline:0; background:transparent; color:var(--text); font-weight:800; font-size:13px;" />
        </div>
        <div style="border:1px solid rgba(26,35,48,.70); border-radius:16px; background:rgba(11,15,21,.55); padding:10px 12px;">
          <div style="color:var(--muted); font-size:11px; font-weight:800; margin-bottom:6px;">QTY</div>
          <input id="sQty" type="number" min="1" value="1" style="width:100%; border:0; outline:0; background:transparent; color:var(--text); font-weight:950; font-size:16px;" />
        </div>
      </div>

      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:12px;">
        <button class="btn ghost" onclick="copyOrder()">Copy pesan</button>
        <a class="btn primary" id="waBtn" href="https://wa.me/message/AJ2VGIT6CVZVE1" target="_blank" rel="noopener">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 21.5a9.5 9.5 0 1 0-8.1-4.5L3 21l4.1-1A9.5 9.5 0 0 0 12 21.5Z" stroke="currentColor" stroke-width="1.6"/>
            <path d="M9.2 8.7c.2-.5.5-.5.7-.5h.6c.2 0 .4.1.5.4l.8 1.8c.1.2.1.5 0 .7l-.4.5c-.1.2-.2.4 0 .6.4.8 1.4 1.9 2.6 2.4.2.1.4.1.6-.1l.6-.7c.2-.2.5-.3.7-.2l1.8.8c.3.1.4.4.4.6 0 .7-.3 1.4-.9 1.8-.6.4-1.5.6-2.7.2-1.8-.6-3.8-2.4-4.8-4.2-.7-1.2-.6-2.2-.3-2.9Z" fill="currentColor" opacity=".9"/>
          </svg>
          Order WA
        </a>
      </div>

      <div class="smallNote">Catatan: sebagian link WA ‚Äúmessage/‚Ä¶‚Äù kadang tidak auto-isi teks. Kalau begitu, klik <b>Copy pesan</b> lalu paste ke chat.</div>
    </div>
  </div>

  <div class="toast" id="toast">Copied ‚úÖ</div>

  <script>
    const WA_LINK = "https://wa.me/message/AJ2VGIT6CVZVE1";

    function photoDataURI(kind){
      const map = {
        lemper: {a:"#2b1c0c", b:"#ffb24a", c:"#0f1622", t:"Lemper"},
        pempekTelur:{a:"#0c2a16", b:"#52f08c", c:"#0f1622", t:"Pempek Telur"},
        pempekLenjer:{a:"#102040", b:"#33c2ff", c:"#0f1622", t:"Pempek Lenjer"},
        rokok:{a:"#2a0c1a", b:"#ff6aa2", c:"#0f1622", t:"Rokok"},
        beer:{a:"#1b2330", b:"#ffd36b", c:"#0f1622", t:"Beer 6 Can"},
        water:{a:"#0b2a3a", b:"#33c2ff", c:"#0f1622", t:"Air Mineral"},
        chips:{a:"#2b1c0c", b:"#ffb24a", c:"#0f1622", t:"Snack"},
        instant:{a:"#1a2330", b:"#4b7dff", c:"#0f1622", t:"Mi Instan"},
        coffee:{a:"#22160f", b:"#cfa67b", c:"#0f1622", t:"Kopi"},
        ice:{a:"#0b1a2b", b:"#7be3ff", c:"#0f1622", t:"Es Batu"}
      };
      const k = map[kind] || map.water;
      const svg = `
        <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="${k.a}"/>
              <stop offset="0.55" stop-color="${k.c}"/>
              <stop offset="1" stop-color="${k.b}"/>
            </linearGradient>
            <filter id="s" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="18" stdDeviation="18" flood-color="rgba(0,0,0,.55)"/>
            </filter>
          </defs>
          <rect width="1200" height="700" fill="url(#g)"/>
          <circle cx="980" cy="120" r="120" fill="rgba(255,255,255,.10)"/>
          <circle cx="200" cy="620" r="170" fill="rgba(255,255,255,.08)"/>
          <g filter="url(#s)">
            <rect x="120" y="170" rx="46" ry="46" width="960" height="360" fill="rgba(255,255,255,.06)" stroke="rgba(255,255,255,.10)"/>
          </g>
          <text x="160" y="260" fill="rgba(233,238,246,.92)" font-size="58" font-family="system-ui, -apple-system, Segoe UI, Roboto, Arial" font-weight="900">${k.t}</text>
          <text x="160" y="318" fill="rgba(154,166,178,.90)" font-size="30" font-family="system-ui, -apple-system, Segoe UI, Roboto, Arial" font-weight="700">SLEPTOPIA ‚Ä¢ Quick Order</text>
          <g opacity=".9">
            <rect x="160" y="360" width="260" height="26" rx="13" fill="rgba(255,255,255,.10)"/>
            <rect x="160" y="404" width="420" height="26" rx="13" fill="rgba(255,255,255,.10)"/>
            <rect x="160" y="448" width="330" height="26" rx="13" fill="rgba(255,255,255,.10)"/>
          </g>
        </svg>
      `.trim();
      return "data:image/svg+xml;charset=utf-8," + encodeURIComponent(svg);
    }

    const DATA = {
      food: [
        { id:"lemper", name:"Lemper", price:5000, unit:"pcs", desc:"Snack tradisional, cocok buat ganjel lapar cepat.", tag:"Best seller", photo:"lemper" },
        { id:"pempek-telur", name:"Empe2 Telur", price:35000, unit:"pcs", desc:"Pempek telur gurih, mantap buat malam-malam.", tag:"Hot", photo:"pempekTelur" },
        { id:"pempek-lenjer", name:"Empe2 Lenjer", price:10000, unit:"pcs", desc:"Pempek lenjer, ringan tapi nagih.", tag:"Classic", photo:"pempekLenjer" },
      ],
      concierge: [
        { id:"rokok", name:"Rokok", price:80000, unit:"pack", desc:"Tersedia beberapa varian (tulis di catatan).", tag:"Minimarket", photo:"rokok" },
        { id:"beer-6", name:"Beer / 6 can", price:250000, unit:"pack", desc:"Beer dingin (jika tersedia) ‚Äî tulis preferensi merek.", tag:"Chilled", photo:"beer" },
        { id:"air", name:"Air mineral 600ml", price:8000, unit:"btl", desc:"Air mineral dingin / normal.", tag:"Essentials", photo:"water" },
        { id:"snack", name:"Snack keripik", price:15000, unit:"pcs", desc:"Keripik pilihan (rasa tergantung stok).", tag:"Snack", photo:"chips" },
        { id:"mi", name:"Mi instan cup", price:12000, unit:"pcs", desc:"Mi cup siap seduh.", tag:"Instant", photo:"instant" },
        { id:"kopi", name:"Kopi kaleng/botol", price:14000, unit:"pcs", desc:"Kopi siap minum.", tag:"Coffee", photo:"coffee" },
        { id:"es", name:"Es batu", price:12000, unit:"bag", desc:"1 kantong es batu.", tag:"Cold", photo:"ice" },
      ]
    };

    let category = "food";
    let query = "";

    const cardsEl = document.getElementById("cards");
    const qEl = document.getElementById("q");

    function rupiah(n){
      return "Rp " + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    function setCategory(cat){
      category = cat;
      document.getElementById("segFood").classList.toggle("active", cat==="food");
      document.getElementById("segConcierge").classList.toggle("active", cat==="concierge");
      render();
      go("p-menu");
    }

    function filterItems(){
      query = (qEl.value || "").toLowerCase().trim();
      render();
    }

    function render(){
      const items = DATA[category].filter(it=>{
        if(!query) return true;
        const s = (it.name + " " + it.desc + " " + it.tag).toLowerCase();
        return s.includes(query);
      });

      if(items.length===0){
        cardsEl.innerHTML = `
          <div class="card"><div class="cardInner">
            <div class="title2">Tidak ketemu üòÖ</div>
            <div class="sub2">Coba kata lain. Contoh: <b>air</b>, <b>rokok</b>, <b>lemper</b>.</div>
          </div></div>
        `;
        return;
      }

      cardsEl.innerHTML = items.map(it=>{
        const imgSrc = photoDataURI(it.photo);
        return `
          <div class="card">
            <div class="cardInner">
              <div class="img">
                <img alt="${it.name}" src="${imgSrc}"/>
                <div class="tag">${it.tag}</div>
              </div>

              <div class="title2">${it.name}</div>
              <div class="sub2">${it.desc}</div>

              <div class="priceRow">
                <div>
                  <span class="price">${rupiah(it.price)}</span>
                  <span class="per">/ ${it.unit}</span>
                </div>
                <span class="badge">${category==="food" ? "Room Service" : "Minimarket"}</span>
              </div>

              <div class="ctaRow">
                <button class="btn ghost" onclick="openSheet('${it.id}')">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M4 7h16M4 12h16M4 17h10" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
                  </svg>
                  Detail
                </button>
                <button class="btn primary" onclick="openSheet('${it.id}', true)">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M6 6h15l-1.5 9H8L6 6Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M9 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM17 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" fill="currentColor"/>
                    <path d="M6 6 5 3H3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                  </svg>
                  Order
                </button>
              </div>
            </div>
          </div>
        `;
      }).join("");
    }

    // Navigation
    const tabs = document.querySelectorAll(".tab");
    const pages = document.querySelectorAll(".page");

    function go(id){
      pages.forEach(p=>p.classList.toggle("active", p.id===id));
      tabs.forEach(t=>t.classList.toggle("active", (t.dataset.go===id)));
      window.scrollTo({top:0, behavior:"instant"});
    }
    tabs.forEach(t=>{
      t.addEventListener("click",(e)=>{
        e.preventDefault();
        const id = t.dataset.go;
        go(id);
      });
    });

    // Sheet
    const sheetBg = document.getElementById("sheetBg");
    const sTitle = document.getElementById("sTitle");
    const sItem = document.getElementById("sItem");
    const sPrice = document.getElementById("sPrice");
    const sUnit = document.getElementById("sUnit");
    const sQty = document.getElementById("sQty");
    const sNote = document.getElementById("sNote");
    const waBtn = document.getElementById("waBtn");

    let current = null;

    function findById(id){
      const all = [...DATA.food, ...DATA.concierge];
      return all.find(x=>x.id===id);
    }

    function openSheet(id, focusNote=false){
      const it = findById(id);
      if(!it) return;
      current = it;
      sTitle.textContent = "Order ‚Äî " + it.name;
      sItem.textContent = it.name;
      sPrice.textContent = rupiah(it.price);
      sUnit.textContent = "per " + it.unit;
      sQty.value = 1;
      sNote.value = "";
      waBtn.href = WA_LINK;
      sheetBg.classList.add("show");
      setTimeout(()=>{ (focusNote ? sNote : sQty).focus(); }, 80);
    }
    function closeSheet(){ sheetBg.classList.remove("show"); }

    async function copyOrder(){
      if(!current) return;
      const qty = Math.max(1, parseInt(sQty.value||"1",10));
      const note = (sNote.value||"").trim();
      const plain =
`Halo, mau order dari SLEPTOPIA:

Item: ${current.name}
Qty: ${qty}
Harga: ${rupiah(current.price)} / ${current.unit}${note ? `\nCatatan: ${note}` : ""}

Terima kasih üôè`;
      try{
        await navigator.clipboard.writeText(plain);
        toast("Pesan dicopy ‚úÖ");
      }catch(e){
        toast("Gagal copy ‚Äî pilih manual ya");
      }
    }

    async function copyTemplate(){
      const text = document.getElementById("tpl").innerText.trim();
      try{
        await navigator.clipboard.writeText(text);
        toast("Template dicopy ‚úÖ");
      }catch(e){
        toast("Gagal copy");
      }
    }

    // Toast
    const toastEl = document.getElementById("toast");
    let toastTimer = null;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toastEl.classList.remove("show"), 1400);
    }

    // Init
    render();
  </script>
</body>
</html>
